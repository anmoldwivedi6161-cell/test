<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Simple Calculator</title>
    <style>
         :root {
            --bg: #0f172a;
            --panel: #0b1220;
            --accent: #06b6d4;
            --button: #e2e8f0
        }
        
        * {
            box-sizing: border-box;
            font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial
        }
        
        body {
            margin: 0;
            min-height: 100vh;
            display: grid;
            place-items: center;
            background: linear-gradient(180deg, #071029, #071a2f);
            padding: 24px
        }
        
        .calculator {
            width: 340px;
            background: var(--panel);
            border-radius: 14px;
            padding: 18px;
            box-shadow: 0 10px 30px rgba(2, 6, 23, .6)
        }
        
        .display {
            background: linear-gradient(180deg, #071027, #03121b);
            color: #e6eef6;
            padding: 14px 12px;
            border-radius: 8px;
            text-align: right;
            font-size: 32px;
            letter-spacing: 0.6px;
            min-height: 56px;
            overflow: hidden
        }
        
        .subdisplay {
            font-size: 12px;
            opacity: .6;
            height: 14px
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: 14px
        }
        
        button {
            padding: 14px;
            border-radius: 10px;
            border: 0;
            font-size: 18px;
            cursor: pointer;
            user-select: none
        }
        
        .btn-num {
            background: #f8fafc;
            color: #0b1220
        }
        
        .btn-op {
            background: #0b1220;
            color: var(--button);
            border: 1px solid rgba(255, 255, 255, .04)
        }
        
        .btn-eq {
            grid-column: span 2;
            background: var(--accent);
            color: #042027;
            font-weight: 700
        }
        
        .btn-wide {
            grid-column: span 2
        }
        
        .btn-clear {
            background: #ff6b6b;
            color: white
        }
        
        footer {
            margin-top: 12px;
            color: #94a3b8;
            font-size: 12px;
            text-align: center
        }
    </style>
</head>

<body>
    <div class="calculator" role="application" aria-label="Simple calculator">
        <div class="display" id="display" aria-live="polite">
            <div class="subdisplay" id="subdisplay"></div>
            <div id="main">0</div>
        </div>

        <div class="grid">
            <button class="btn-clear" data-action="clear">C</button>
            <button class="btn-op" data-action="back">âŒ«</button>
            <button class="btn-op" data-action="percent">%</button>
            <button class="btn-op" data-action="operator">/</button>

            <button class="btn-num" data-num="7">7</button>
            <button class="btn-num" data-num="8">8</button>
            <button class="btn-num" data-num="9">9</button>
            <button class="btn-op" data-action="operator">*</button>

            <button class="btn-num" data-num="4">4</button>
            <button class="btn-num" data-num="5">5</button>
            <button class="btn-num" data-num="6">6</button>
            <button class="btn-op" data-action="operator">-</button>

            <button class="btn-num" data-num="1">1</button>
            <button class="btn-num" data-num="2">2</button>
            <button class="btn-num" data-num="3">3</button>
            <button class="btn-op" data-action="operator">+</button>

            <button class="btn-num" data-num="0">0</button>
            <button class="btn-num" data-num=".">.</button>
            <button class="btn-eq btn-op" data-action="equals">=</button>
        </div>

        <footer>Keyboard: numbers, +-*/ Enter =, Backspace, Esc to clear</footer>
    </div>

    <script>
        // Simple calculator logic
        (function() {
            const display = document.getElementById('main');
            const sub = document.getElementById('subdisplay');
            let current = '';
            let previous = null;
            let operator = null;
            let justEvaluated = false;

            function updateView() {
                display.textContent = current || (previous !== null ? String(previous) : '0');
                sub.textContent = previous !== null && operator ? `${previous} ${operator}` : '';
            }

            function inputNumber(n) {
                if (justEvaluated) {
                    current = '';
                    justEvaluated = false;
                }
                if (n === '.' && current.includes('.')) return;
                if (n === '0' && current === '0') return;
                if (current === '0' && n !== '.') current = n;
                else current += n;
                updateView();
            }

            function clearAll() {
                current = '';
                previous = null;
                operator = null;
                justEvaluated = false;
                updateView();
            }

            function backspace() {
                if (current) current = current.slice(0, -1);
                updateView();
            }

            function setOperator(op) {
                if (current === '' && previous === null) return; // nothing to do
                if (previous === null) {
                    previous = parseFloat(current || '0');
                } else if (current !== '') {
                    previous = compute(previous, parseFloat(current), operator);
                }
                operator = op;
                current = '';
                updateView();
            }

            function compute(a, b, op) {
                if (op === '+') return a + b;
                if (op === '-') return a - b;
                if (op === '*') return a * b;
                if (op === '/') return b === 0 ? NaN : a / b;
                return b;
            }

            function percent() {
                if (current) {
                    current = String(parseFloat(current) / 100);
                } else if (previous !== null) {
                    previous = previous / 100;
                }
                updateView();
            }

            function evaluate() {
                if (operator === null || (current === '' && operator)) return;
                const b = parseFloat(current || String(previous || 0));
                const result = compute(previous === null ? 0 : previous, b, operator);
                current = String(isNaN(result) ? 'Error' : trimResult(result));
                previous = null;
                operator = null;
                justEvaluated = true;
                updateView();
            }

            function trimResult(n) {
                // Keep reasonable precision
                if (!isFinite(n)) return NaN;
                const s = String(n);
                if (s.length > 12) {
                    return Number(n.toPrecision(12));
                }
                return n;
            }

            document.querySelectorAll('[data-num]').forEach(btn => {
                btn.addEventListener('click', () => inputNumber(btn.dataset.num));
            });

            document.querySelectorAll('button[data-action]').forEach(btn => {
                const act = btn.dataset.action;
                btn.addEventListener('click', () => {
                    if (act === 'clear') clearAll();
                    if (act === 'back') backspace();
                    if (act === 'percent') percent();
                    if (act === 'equals') evaluate();
                    if (act === 'operator') setOperator(btn.textContent.trim());
                });
            });

            // Keyboard support
            window.addEventListener('keydown', (e) => {
                if (e.key >= '0' && e.key <= '9') return inputNumber(e.key);
                if (e.key === '.') return inputNumber('.');
                if (e.key === 'Enter' || e.key === '=') {
                    e.preventDefault();
                    return evaluate();
                }
                if (e.key === '+' || e.key === '-' || e.key === '*' || e.key === '/') {
                    setOperator(e.key);
                }
                if (e.key === 'Backspace') backspace();
                if (e.key === 'Escape') clearAll();
            });

            // initialize
            clearAll();
        })();
    </script>
</body>

</html>